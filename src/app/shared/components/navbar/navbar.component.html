<nav class="bg-gray-100 border-b border-gray-300 sticky top-0 z-50">
    <div class="max-w-screen-xxl mx-auto px-6">
        <div class="flex items-center justify-between h-16">

            <!-- LEFT SIDE -->
            <div class="flex items-center gap-10">
                <!-- LOGO -->
                <div class="flex items-center gap-2">
                    <img src="/img/logo-removebg-preview.png" alt="FreshCart Logo" class="h-8 w-8 object-contain" />
                    <span class="text-xl font-bold text-gray-800">
                        {{ translation.currentLanguage === 'en' ? 'Fresh' : 'فريش' }}
                        <span class="text-green-600">
                            {{ translation.currentLanguage === 'en' ? 'Cart' : 'كارت' }}
                        </span>
                    </span>
                </div>

                <!-- DESKTOP PAGES -->
                <ul class="hidden md:flex items-center gap-8 text-sm font-medium">
                    @if(isUser){
                    @for(page of pages; track $index){
                    <li>
                        <a [routerLink]="page.Link" routerLinkActive="text-green-600" class="text-gray-700 transition">
                            {{ translation.currentLanguage === 'en' ? page.TEXT : page.ARABIC }}
                        </a>
                    </li>
                    }
                    }
                </ul>
            </div>

            <!-- DESKTOP RIGHT SIDE -->
            <div class="hidden md:flex items-center gap-5 relative">

                <!-- Cart -->
                @if(isUser){
                <a routerLink="/cart" class="relative">
                    <i class="fa-solid fa-cart-shopping text-gray-700 text-lg"></i>
                    <span
                        class="absolute -top-2 -right-2 bg-green-600 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full">
                        {{ TotalItems() }}
                    </span>
                </a>
                }

                <!-- Social -->
                @for(icon of socialmediaicons; track $index){
                <a [href]="icon.link" target="_blank" class="text-gray-700 hover:text-green-600">
                    <i [innerHTML]="icon.icon"></i>
                </a>
                }

                <!-- Auth OR Account -->
                @if(!isUser){
                @for(authpage of authpages; track $index){
                <a [routerLink]="authpage.Link" class="text-gray-700 hover:text-green-600">
                    {{ translation.currentLanguage === 'en' ? authpage.TEXT : authpage.ARABIC }}
                </a>
                }
                } @else {
                <div class="relative">
                    <button (click)="dropdownOpen.set(!dropdownOpen())"
                        class="flex items-center gap-2 text-gray-700 hover:text-green-600">
                        {{ translation.currentLanguage === 'en' ? 'Account' : 'الحساب' }}
                        <i class="fa-solid fa-caret-down"></i>
                    </button>

                    @if(dropdownOpen()){
                    <ul class="absolute right-0 mt-2 w-48 bg-white border rounded-xl shadow-lg z-50">
                        <li>
                            <button (click)="navigateToChangePassword()"
                                class="w-full text-left px-4 py-2 hover:bg-green-100">
                                {{ translation.currentLanguage === 'en' ? 'Change Password' : 'تغيير كلمة المرور' }}
                            </button>
                        </li>
                        <li>
                            <button (click)="signout()"
                                class="w-full text-left px-4 py-2 hover:bg-red-100 text-red-600">
                                {{ translation.currentLanguage === 'en' ? 'Signout' : 'تسجيل الخروج' }}
                            </button>
                        </li>
                    </ul>
                    }
                </div>
                }

                <!-- Language -->
                <div class="relative">
                    <button (click)="languageDropdownOpen.set(!languageDropdownOpen())"
                        class="flex items-center gap-2 text-gray-700 hover:text-green-600">
                        {{ translation.currentLanguage === 'en' ? 'English' : 'العربية' }}
                        <i class="fa-solid fa-caret-down"></i>
                    </button>

                    @if(languageDropdownOpen()){
                    <ul class="absolute right-0 mt-2 w-32 bg-white border rounded-xl shadow-lg z-50">
                        @for(lang of languages; track $index){
                        <li>
                            <button (click)="changeLanguage(lang.code)"
                                class="w-full text-left px-4 py-2 hover:bg-green-100">
                                {{ lang.label }}
                            </button>
                        </li>
                        }
                    </ul>
                    }
                </div>

            </div>

            <!-- MOBILE HAMBURGER -->
            <button class="md:hidden text-gray-700 p-2" (click)="toggleMobileMenu()">
                <i class="fa-solid fa-bars text-xl"></i>
            </button>

        </div>
    </div>

    <!-- MOBILE MENU -->
    @if(mobileMenuOpen()){
    <div class="md:hidden fixed inset-0 bg-white z-999 overflow-y-auto">

        <div class="px-6 py-6 flex flex-col gap-6">

            <!-- Close -->
            <div class="flex justify-end">
                <button (click)="toggleMobileMenu()">
                    <i class="fa-solid fa-xmark text-2xl"></i>
                </button>
            </div>

            <!-- Pages -->
            @if(isUser){
            @for(page of pages; track $index){
            <a [routerLink]="page.Link" (click)="toggleMobileMenu()" class="text-lg border-b pb-3">
                {{ translation.currentLanguage === 'en' ? page.TEXT : page.ARABIC }}
            </a>
            }
            }

            <!-- Cart -->
            @if(isUser){
            <a routerLink="/cart" (click)="toggleMobileMenu()" class="flex justify-between text-lg border-b pb-3">
                <span>Cart</span>
                <span class="bg-green-600 text-white px-2 rounded-full">
                    {{ TotalItems() }}
                </span>
            </a>
            }

            <!-- Auth -->
            @if(!isUser){
            @for(authpage of authpages; track $index){
            <a [routerLink]="authpage.Link" (click)="toggleMobileMenu()" class="text-lg border-b pb-3">
                {{ translation.currentLanguage === 'en' ? authpage.TEXT : authpage.ARABIC }}
            </a>
            }
            }

            <!-- Account -->
            @if(isUser){
            <button (click)="navigateToChangePassword(); toggleMobileMenu()" class="text-left border-b pb-3">
                {{ translation.currentLanguage === 'en' ? 'Change Password' : 'تغيير كلمة المرور' }}
            </button>

            <button (click)="signout(); toggleMobileMenu()" class="text-left text-red-600 border-b pb-3">
                {{ translation.currentLanguage === 'en' ? 'Signout' : 'تسجيل الخروج' }}
            </button>
            }

            <!-- Language -->
            <div class="pt-4">
                <p class="text-gray-500 text-sm mb-2">
                    {{ translation.currentLanguage === 'en' ? 'Language' : 'اللغة' }}
                </p>

                @for(lang of languages; track $index){
                <button (click)="changeLanguage(lang.code)" class="block w-full text-left py-2">
                    {{ lang.label }}
                </button>
                }
            </div>

            <!-- Social -->
            <div class="flex gap-6 pt-6">
                @for(icon of socialmediaicons; track $index){
                <a [href]="icon.link" target="_blank" class="text-xl">
                    <i [innerHTML]="icon.icon"></i>
                </a>
                }
            </div>

        </div>
    </div>
    }

</nav>